cmd: adb shell "count=0; for part in /sys/block/mmcblk0/mmcblk0p*/; do name=`grep ^PARTNAME= \"$part/uevent\" | cut -d= -f2`; size=`expr \`cat \"$part/size\"\` \* 512`; printf \"%s (%s): %s bytes\n\" `basename \"$part\"` \"${name:-unknown}\" \"$size\"; count=`expr $count + 1`; done; printf \"Total partitions: %d\n\" \"$count\""
pwsh: adb shell 'count=0; for part in /sys/block/mmcblk0/mmcblk0p*/; do name=$(grep ^PARTNAME= "$part/uevent" | cut -d= -f2); size=$(expr $(cat "$part/size") \* 512); printf "%s (%s): %s bytes\n" $(basename "$part") "${name:-unknown}" "$size"; count=$((count+1)); done; printf "Total partitions: %d\n" "$count"'